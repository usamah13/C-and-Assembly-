Both the list and tree libraries think that they own the elements that are passed in, so they free the elements on deletion. While this works when the libraries are independent, it falls apart if they are used together with common elements. Thus, when main.c calls list_delete, all the elements in the list are freed, so when you call tree_suffix_print it prints out freed elements, which contain arbitrary (garbage) content. Finally, when the tree elements are freed again, a crash might occur due to double-free.